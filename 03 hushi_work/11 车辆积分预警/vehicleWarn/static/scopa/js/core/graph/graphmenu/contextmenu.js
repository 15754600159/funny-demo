define("scopa/core/graph/graphmenu/contextmenu",["jquery"],function(a){a("jquery"),function(a){var b,c,d={eventPosX:"pageX",eventPosY:"pageY",onContextMenu:null,onShowMenu:null,interval:18};a.fn.contextMenu=function(f,g){b=a("#graphMenu"),b||(b=a('<div id="graphMenu" class="graphMenu"></div>').appendTo("body")),b.hide().bind("click",function(a){a.stopPropagation()}).on("selectstart",function(){return!1}),c=c||[],c.push({id:f,bindings:g.bindings||{},onContextMenu:g.onContextMenu||d.onContextMenu,onShowMenu:g.onShowMenu||d.onShowMenu,eventPosX:g.eventPosX||d.eventPosX,eventPosY:g.eventPosY||d.eventPosY});var h=c.length-1;return a(this).bind("contextmenu",function(a){var b=c[h].onContextMenu?c[h].onContextMenu(a):!0;return b&&e(h,this,a,g),!1}),this};var e=function(d,e,g){var h=c[d];return a("#graphMenu").size()>0&&(b=a("#graphMenu")),h.onShowMenu&&(b=h.onShowMenu(g,b)),mining.utils.isEmpty(b)||mining.utils.isEmpty(b.html())?!1:(a.each(h.bindings,function(c,d){var e="[action="+c+"]";b.off("click",e).on("click",e,function(){f(),a(this).hasClass("disabled")||d(a(this))})}),a(".graphmenu-sub",b).css({display:"block",opacity:"0","z-index":10}).transform("scale(1)"),setTimeout(function(){a(".graphmenu-sub",b).transform("scale(0.5)").css("z-index",1),setTimeout(function(){a(".graphmenu-sub",b).css({opacity:"1"})},200)},200),a(".graphmenu-sub",b).transform("transform .1s linear","transition"),b.css({left:g[h.eventPosX],top:g[h.eventPosY],display:"block"}),b.transform("scale(1)"),a(".graphmenu-main .graphmenu-btn",b).off("mouseover").on("mouseover",function(){var c=a(this).attr("submenu"),d=a(".graphmenu-sub[for="+c+"]",b);a(".graphmenu-sub",b).not(d).transform("scale(0.5)").css("z-index",1),a(this).hasClass("disabled")||d.size()<1||d.transform("scale(1)").css("z-index",10)}),a("#graphMenu").on("click",f),a(document).one("click",f),void 0)};a(document).on("mouseleave","#graphMenu",function(){a(".graphmenu-sub",b).transform("scale(0.5)").css("z-index",1)});var f=function(){b.transform("scale(0)")};a.contextMenu={defaults:function(b){a.each(b,function(b,c){"object"==typeof c&&d[b]?a.extend(d[b],c):d[b]=c})}}}(jQuery)});
