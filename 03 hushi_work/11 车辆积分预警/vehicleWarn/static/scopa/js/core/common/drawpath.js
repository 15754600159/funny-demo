define("scopa/core/common/drawpath",["../../common/cartoon"],function(a){var b,c,d,e,f,g,h=a("../../common/cartoon"),i={container:null,pathData:null,waitPath:null,startTime:null,endTime:null,playTime:0},j=function(a){a=$.extend({},i,a),b=a.container="string"==typeof a.container?$(a.container):a.container,e=parseInt(a.startTime),f=parseInt(a.endTime),g=parseInt(a.playTime),c=a.pathData,d=a.waitPath},k=function(a){if(c){var d=c[a].position[0].y,e=c[a].position[0].x,f=c[a].color;b.append('<span class="path-point" gid="'+a+'" style="top:'+d+"px;left:"+e+"px;background-color:"+f+';"></span>'),l(a)}},l=function(a){var b=c[a].index,d=c[a].position;if(b==d.length-1)return m=null,n(a),void 0;var i=d[b],j=d[b+1],k={from:[i.y,i.x],to:[j.y,j.x],t:parseInt((j.t-i.t)*g/(f-e))},m=new h.init(k.t,10,"uniform");b++,c[a].index=b,m.run(function(b){$('.path-point[gid="'+a+'"]').css({top:k.from[0]+(k.to[0]-k.from[0])*b,left:k.from[1]+(k.to[1]-k.from[1])*b,backgroundColor:c[a].color})},function(){l(a)})},m=function(a,b){d&&!mining.utils.isEmpty(d)&&$.each(d,function(a,c){return b>=c?(console.log("81:"+c),k(a),delete d[a],void 0):void 0})},n=function(a){a?$('.path-point[gid="'+a+'"]').remove():$(".path-point").remove(),c=null,d=null};return{init:j,getPath:m,clearPath:n}});
